{"version":3,"file":"index.modern.js","sources":["../src/context/state.ts","../src/context/reducer.ts","../src/context/index.tsx","../src/utils/usePrevious.ts","../src/components/bussniess/Viewer/hooks.ts","../src/components/bussniess/Viewer/index.tsx","../src/components/common/Tooltip/index.tsx","../src/components/bussniess/Controller/hooks.ts","../src/components/bussniess/Controller/index.tsx","../src/components/common/ScaleTip/index.tsx","../src/components/bussniess/Browser/index.tsx","../src/components/bussniess/PictureViewer/index.tsx"],"sourcesContent":["import { IPicture } from '@/components/bussniess/PictureViewer/interface'\n\nexport interface IState {\n  layerShown: boolean\n  picturesList: IPicture[]\n  pictureOrder: number\n  imgScale: number\n  imgRotate: number\n}\n\ninterface initialProps {\n  picturesList: IPicture[]\n}\n\nexport const initialState = ({ picturesList }: initialProps): IState => ({\n  picturesList,\n  layerShown: false,\n  imgScale: 1,\n  pictureOrder: 0,\n  imgRotate: 0\n})\n","import { IState } from './state'\nimport { IAction } from './action'\n\nfunction reducer(state: IState, action: IAction): IState {\n  switch (action.type) {\n    case 'SHOWN_LAYER': {\n      const returnState = { ...state, layerShown: action.visible }\n      if (!action.visible) returnState.imgScale = 1\n      return returnState\n    }\n\n    case 'SET_SCALE': {\n      return { ...state, imgScale: action.scale }\n    }\n\n    case 'SET_ROTATE': {\n      return { ...state, imgRotate: action.rotate }\n    }\n\n    case 'SET_PICTURE_ORDER': {\n      const picturesListLength = state.picturesList.length\n      let picOrder = action.order\n      if (picOrder + 1 > picturesListLength) {\n        picOrder = picturesListLength - 1\n      }\n      if (picOrder < 0) {\n        picOrder = 0\n      }\n\n      return { ...state, pictureOrder: picOrder, imgScale: 1, imgRotate: 0 }\n    }\n\n    default:\n      return state\n  }\n}\n\nexport default reducer\n","import React, { createContext, useReducer, Dispatch, useContext } from 'react'\nimport { initialState, IState } from './state'\nimport { IAction } from './action'\nimport reducer from './reducer'\nimport { IPicture } from '@/components/bussniess/PictureViewer/interface'\n\ninterface IContext extends IState {\n  dispatch: Dispatch<IAction>\n}\nconst Context = createContext(null as IContext | null)\n\ninterface Props {\n  picturesList: IPicture[]\n}\n\nconst ContextProvider: React.FC<Props> = ({ children, ...props }) => {\n  const { picturesList } = props\n  const [state, dispatch] = useReducer(reducer, initialState({ picturesList }))\n\n  return (\n    <Context.Provider value={{ dispatch, ...state }}>\n      {children}\n    </Context.Provider>\n  )\n}\n\nexport function useStore() {\n  const store = useContext(Context)\n  if (!store) {\n    throw new Error('store is Empty')\n  }\n\n  return store\n}\n\nexport default ContextProvider\n","import { useRef } from 'react'\n\nexport type compareFunction<T> = (prev: T | undefined, next: T) => boolean\n\nexport default <T>(state: T, compare?: compareFunction<T>): T | undefined => {\n  const prevRef = useRef<T>()\n  const curRef = useRef<T>()\n\n  const needUpdate =\n    typeof compare === 'function' ? compare(curRef.current, state) : true\n\n  if (needUpdate) {\n    prevRef.current = curRef.current\n    curRef.current = state\n  }\n\n  return prevRef.current\n}\n","import { useEffect, useState, useCallback, useMemo, MouseEvent } from 'react'\nimport { useStore } from '@/context'\nimport usePrevious from '@/utils/usePrevious'\n\nconst floor = (num: number) => Math.floor(num)\nconst abs = (num: number) => Math.abs(num)\n\nexport function useWindowSize() {\n  const [windowWidth, setWindowWidth] = useState(document.body.clientWidth)\n  const [windowHeight, setWindowHeight] = useState(document.body.clientHeight)\n\n  const setSize = useCallback(() => {\n    setWindowWidth(document.body.clientWidth)\n    setWindowHeight(document.body.clientHeight)\n  }, [])\n\n  useEffect(() => {\n    window.addEventListener('resize', setSize)\n    return () => {\n      window.removeEventListener('resize', setSize)\n    }\n  }, [])\n\n  return { windowWidth, windowHeight }\n}\n\nexport function useImgSize(fn: () => HTMLImageElement | null) {\n  const { imgScale } = useStore()\n  const [imgWidth, setImgWidth] = useState(0)\n  const [imgHeight, setImgHeight] = useState(0)\n\n  useEffect(() => {\n    const ele = fn()\n    if (!ele) return\n    setImgWidth(ele.clientWidth * imgScale)\n    setImgHeight(ele.clientHeight * imgScale)\n  }, [fn])\n\n  return { imgWidth, imgHeight }\n}\n\nexport function useDragInfo() {\n  const { windowWidth, windowHeight } = useWindowSize()\n  const { imgWidth, imgHeight } = useImgSize(() =>\n    document.querySelector<HTMLImageElement>('#viewerImg')\n  )\n\n  const isCanDrag = useMemo(\n    () => imgWidth > windowWidth || imgHeight > windowHeight,\n    [imgWidth, imgHeight, windowWidth, windowHeight]\n  )\n\n  return { isCanDrag, windowWidth, windowHeight, imgWidth, imgHeight }\n}\n\nexport function useMove() {\n  const { imgScale } = useStore()\n  const preImgScale = usePrevious(imgScale, (prev, next) => prev !== next)\n  const [dragStatus, setDragStatus] = useState(false)\n  const [lastReacordPos, setLastRecordPos] = useState({ x: 0, y: 0 })\n  const [startPos, setStartPos] = useState({ x: 0, y: 0 })\n  const [offsetPos, setOffsetPos] = useState({ x: 0, y: 0 })\n  const {\n    isCanDrag,\n    windowWidth,\n    imgWidth,\n    windowHeight,\n    imgHeight\n  } = useDragInfo()\n\n  useEffect(() => {\n    // If it is not possible in advance, set the picture as the center\n    if (!isCanDrag) {\n      setStartPos({ x: 0, y: 0 })\n      setOffsetPos({ x: 0, y: 0 })\n      setLastRecordPos({ x: 0, y: 0 })\n    } else {\n      if (!preImgScale) return\n      if (preImgScale < imgScale) return\n\n      setOffsetPos({ x: 0, y: 0 })\n      setLastRecordPos({ x: 0, y: 0 })\n    }\n  }, [preImgScale, isCanDrag])\n\n  const onStartMove = useCallback(\n    (e: MouseEvent<HTMLImageElement>) => {\n      e.preventDefault()\n      if (!isCanDrag) return\n      setDragStatus(true)\n      setStartPos({ x: e.clientX, y: e.clientY })\n    },\n    [isCanDrag]\n  )\n\n  const onMoving = useCallback(\n    (e: MouseEvent<HTMLImageElement>) => {\n      e.persist()\n      if (!isCanDrag || !dragStatus) return\n\n      const newPosX = startPos.x - e.clientX + lastReacordPos.x\n      const newPosY = startPos.y - e.clientY + lastReacordPos.y\n\n      if (imgWidth > windowWidth || imgHeight > windowHeight) {\n        if (abs(floor(newPosX)) < floor((imgWidth - windowWidth) / 2)) {\n          setOffsetPos((pos) => ({\n            ...pos,\n            x: newPosX\n          }))\n        }\n\n        if (abs(floor(newPosY)) < floor((imgHeight - windowHeight) / 2)) {\n          setOffsetPos((pos) => ({\n            ...pos,\n            y: newPosY\n          }))\n        }\n      }\n    },\n    [\n      isCanDrag,\n      dragStatus,\n      startPos,\n      lastReacordPos,\n      imgWidth,\n      imgHeight,\n      windowWidth,\n      windowHeight\n    ]\n  )\n\n  const onEndMove = useCallback(\n    (e: MouseEvent<HTMLImageElement>) => {\n      e.preventDefault()\n      if (dragStatus === false) return\n      setDragStatus(false)\n      setLastRecordPos({ x: offsetPos.x, y: offsetPos.y })\n    },\n    [isCanDrag, dragStatus, offsetPos]\n  )\n\n  return { onStartMove, onMoving, onEndMove, offsetPos, dragStatus }\n}\n","import React, { memo } from 'react'\nimport { useStore } from '@/context'\nimport { useDragInfo, useMove } from './hooks'\nimport styles from './style.module.scss'\n\nconst Viewer: React.FC = () => {\n  const { picturesList, pictureOrder, imgScale, imgRotate } = useStore()\n  const { isCanDrag } = useDragInfo()\n  const { onStartMove, onMoving, onEndMove, offsetPos, dragStatus } = useMove()\n\n  return (\n    <div\n      className={styles.imgWrapper}\n      onMouseUp={onEndMove}\n      onMouseLeave={onEndMove}\n    >\n      <div className={styles.container}>\n        <img\n          id=\"viewerImg\"\n          draggable\n          style={{\n            transform: `translate(${-offsetPos.x}px, ${-offsetPos.y}px) scale(${imgScale}) rotate(${imgRotate}deg)`,\n            transition: dragStatus ? `none` : 'transform 0.3s ease-in-out',\n            cursor: isCanDrag ? 'grab' : 'inherit'\n          }}\n          src={picturesList[pictureOrder]?.src || ''}\n          alt={picturesList[pictureOrder]?.alt || ''}\n          onMouseDown={onStartMove}\n          onMouseMove={onMoving}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default memo(Viewer)\n","import React, { memo } from 'react'\nimport styles from './styles.module.scss'\n\ninterface Props {\n  content: React.ReactNode\n  children: React.ReactNode\n}\n\nconst Tooltip: React.FC<Props> = ({ content, children }) => {\n  return (\n    <div className={styles.tooltip}>\n      {children}\n\n      <span className={styles.tooltipContent}>{content}</span>\n    </div>\n  )\n}\n\nexport default memo(Tooltip)\n","import { useEffect, useCallback, useState, useMemo } from 'react'\nimport { useStore } from '@/context'\n\nexport function useKeyboardClose(usingStatus: boolean, onClose: () => void) {\n  const listenEnterToClose = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.code !== 'Escape') return\n      e.preventDefault()\n      onClose()\n    },\n    [onClose]\n  )\n\n  useEffect(() => {\n    if (!usingStatus) return\n    document.addEventListener('keyup', listenEnterToClose)\n    return () => {\n      document.removeEventListener('keyup', listenEnterToClose)\n    }\n  }, [])\n}\n\nexport function useIntoViewerShown() {\n  const { layerShown } = useStore()\n  const [controllerShown, setControllerShown] = useState(true)\n\n  useEffect(() => {\n    if (!layerShown) return\n    let timeout: NodeJS.Timeout | null = null\n    timeout = setTimeout(() => {\n      setControllerShown(false)\n    }, 2000)\n\n    return () => {\n      if (timeout) clearTimeout(timeout)\n    }\n  }, [layerShown])\n\n  return controllerShown\n}\n\nexport function useScale() {\n  const { dispatch, imgScale } = useStore()\n  const zoomin = useCallback(() => {\n    if (imgScale >= 5) return\n    dispatch({ type: 'SET_SCALE', scale: imgScale + 0.25 })\n  }, [imgScale])\n\n  const zoomout = useCallback(() => {\n    if (imgScale <= 0.25) return\n    dispatch({ type: 'SET_SCALE', scale: imgScale - 0.25 })\n  }, [imgScale])\n\n  const zoomreset = useCallback(() => {\n    dispatch({ type: 'SET_SCALE', scale: 1 })\n  }, [])\n\n  return { zoomin, zoomout, zoomreset }\n}\n\nexport function useToggle() {\n  const { picturesList, pictureOrder, dispatch } = useStore()\n\n  const isCanGoNext = useMemo(() => {\n    return pictureOrder + 1 < picturesList.length\n  }, [pictureOrder, picturesList])\n\n  const isCanGoLast = useMemo(() => {\n    return pictureOrder > 0\n  }, [pictureOrder])\n\n  const goNext = useCallback(() => {\n    dispatch({ type: 'SET_PICTURE_ORDER', order: pictureOrder + 1 })\n  }, [pictureOrder])\n\n  const goLast = useCallback(() => {\n    dispatch({ type: 'SET_PICTURE_ORDER', order: pictureOrder - 1 })\n  }, [pictureOrder])\n\n  return { goNext, goLast, isCanGoNext, isCanGoLast }\n}\n\nexport function useRotate() {\n  const { imgRotate, dispatch } = useStore()\n\n  const rotate = useCallback(() => {\n    dispatch({ type: 'SET_ROTATE', rotate: imgRotate + 90 })\n  }, [imgRotate])\n\n  return { rotate }\n}\n","import React, { memo, Fragment } from 'react'\nimport Tooltip from '@/components/common/Tooltip'\nimport { useStore } from '@/context'\nimport {\n  useKeyboardClose,\n  useIntoViewerShown,\n  useScale,\n  useToggle,\n  useRotate\n} from './hooks'\nimport styles from './styles.module.scss'\n\ninterface Props {\n  keyboard: boolean\n  onClose(): void\n}\n\nconst Controller: React.FC<Props> = ({ onClose, keyboard }) => {\n  const { dispatch } = useStore()\n  useKeyboardClose(keyboard, onClose)\n  const controllerShown = useIntoViewerShown()\n  const { zoomin, zoomout, zoomreset } = useScale()\n  const { rotate } = useRotate()\n  const { goNext, goLast, isCanGoNext, isCanGoLast } = useToggle()\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.top}>\n        <div\n          className={styles.close}\n          onClick={() => dispatch({ type: 'SHOWN_LAYER', visible: false })}\n        >\n          <i className=\"iconfont icon-close\" />\n        </div>\n      </div>\n\n      <div\n        className={styles.bottom + (controllerShown ? ` ${styles.shown}` : '')}\n      >\n        <div className={styles.controller}>\n          {(isCanGoLast || isCanGoNext) && (\n            <Fragment>\n              <Tooltip content=\"上一张\">\n                <div\n                  className={\n                    `${styles.controllerItem}` +\n                    `${isCanGoLast ? '' : ` ${styles.disabled}`}`\n                  }\n                  onClick={goLast}\n                >\n                  <i\n                    className=\"iconfont icon-arrow\"\n                    style={{ transform: 'rotate(180deg)' }}\n                  />\n                </div>\n              </Tooltip>\n\n              <Tooltip content=\"下一张\">\n                <div\n                  className={\n                    `${styles.controllerItem}` +\n                    `${isCanGoNext ? '' : ` ${styles.disabled}`}`\n                  }\n                  onClick={goNext}\n                >\n                  <i className=\"iconfont icon-arrow\" />\n                </div>\n              </Tooltip>\n              <span className={styles.separator} />\n            </Fragment>\n          )}\n\n          <Tooltip content=\"旋转\">\n            <div className={styles.controllerItem} onClick={rotate}>\n              <i\n                className=\"iconfont icon-rotate\"\n                style={{ transform: 'scaleX(-1) rotate(-90deg)' }}\n              />\n            </div>\n          </Tooltip>\n\n          <Tooltip content=\"放大\">\n            <div className={styles.controllerItem} onClick={zoomin}>\n              <i className=\"iconfont icon-zoomin\" />\n            </div>\n          </Tooltip>\n\n          <Tooltip content=\"缩小\">\n            <div className={styles.controllerItem} onClick={zoomout}>\n              <i className=\"iconfont icon-zoomout\" />\n            </div>\n          </Tooltip>\n\n          <Tooltip content=\"还原比例\">\n            <div className={styles.controllerItem} onClick={zoomreset}>\n              <i className=\"iconfont icon-zoomreset\" />\n            </div>\n          </Tooltip>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default memo(Controller)\n","import React, { memo, useState, useEffect } from 'react'\nimport { useStore } from '@/context'\nimport styles from './style.module.scss'\n\nlet timeout: NodeJS.Timeout | null = null\n\nconst ScaleTip: React.FC = () => {\n  const { imgScale } = useStore()\n  const [shown, setShown] = useState(false)\n\n  useEffect(() => {\n    if (timeout) {\n      if (!shown) setShown(true)\n      clearTimeout(timeout)\n    }\n    timeout = setTimeout(() => {\n      setShown(false)\n    }, 1000)\n\n    return () => {\n      if (timeout) clearTimeout(timeout)\n    }\n  }, [imgScale])\n\n  return (\n    <div\n      className={styles.tooltip}\n      style={{\n        opacity: shown ? 1 : 0,\n        visibility: shown ? 'visible' : 'hidden'\n      }}\n    >\n      {imgScale * 100}%\n    </div>\n  )\n}\n\nexport default memo(ScaleTip)\n","import React, { Fragment, memo, useEffect } from 'react'\nimport { useStore } from '@/context'\nimport { Portal } from 'react-portal'\nimport Viewer from '../Viewer'\nimport Controller from '../Controller'\nimport ScaleTip from '@/components/common/ScaleTip'\nimport { Props } from './interface.d'\nimport styles from './styles.module.scss'\n\nconst Browser: React.FC<Props> = (props) => {\n  const { keyboard, pictureOrder } = props\n  const { layerShown, dispatch } = useStore()\n\n  useEffect(() => {\n    if (layerShown) {\n      dispatch({ type: 'SET_PICTURE_ORDER', order: pictureOrder })\n    }\n  }, [layerShown])\n\n  return (\n    <Fragment>\n      {layerShown && (\n        <Portal>\n          <div className={styles.wrapperLayer}>\n            <Viewer />\n\n            <Controller\n              keyboard={keyboard}\n              onClose={() => dispatch({ type: 'SHOWN_LAYER', visible: false })}\n            />\n\n            <ScaleTip />\n          </div>\n        </Portal>\n      )}\n    </Fragment>\n  )\n}\n\nexport default memo(Browser)\n","import React, { useMemo, Fragment, memo } from 'react'\nimport ContextProvider, { useStore } from '@/context'\nimport Browser from '@/components/bussniess/Browser'\nimport { Props, IPicture } from './interface'\n\ninterface ImgProps {\n  firstImg: IPicture\n  style?: React.CSSProperties\n  className?: string\n}\n\nconst ImgViewer: React.FC<ImgProps> = memo((props) => {\n  const { style, className, firstImg } = props\n  const { dispatch } = useStore()\n  return (\n    <img\n      className={className}\n      style={{ cursor: 'zoom-in', ...style }}\n      src={firstImg.src}\n      alt={firstImg.alt}\n      onClick={() => dispatch({ type: 'SHOWN_LAYER', visible: true })}\n    />\n  )\n})\n\nconst PictureViewer: React.FC<Props> = (props) => {\n  const {\n    className,\n    style,\n    picture,\n    zIndex = 1000,\n    keyboard = true,\n    pictureOrder = 0\n  } = props\n\n  const firstImg = useMemo<IPicture>(\n    () => (Array.isArray(picture) ? picture[0] : picture),\n    [picture]\n  )\n\n  const picturesList = useMemo<IPicture[]>(\n    () => (Array.isArray(picture) ? picture : [picture]),\n    [picture]\n  )\n\n  return (\n    <ContextProvider picturesList={picturesList}>\n      <Fragment>\n        <ImgViewer firstImg={firstImg} style={style} className={className} />\n\n        <Browser\n          zIndex={zIndex}\n          keyboard={keyboard}\n          pictureOrder={pictureOrder}\n        />\n      </Fragment>\n    </ContextProvider>\n  )\n}\n\nexport default PictureViewer\n"],"names":["initialState","picturesList","layerShown","imgScale","pictureOrder","imgRotate","reducer","state","action","type","returnState","visible","scale","rotate","picturesListLength","length","picOrder","order","Context","createContext","ContextProvider","children","props","dispatch","useReducer","React","Provider","value","useStore","store","useContext","Error","compare","prevRef","useRef","curRef","needUpdate","current","floor","num","Math","abs","useWindowSize","windowWidth","setWindowWidth","useState","document","body","clientWidth","windowHeight","setWindowHeight","clientHeight","setSize","useCallback","useEffect","window","addEventListener","removeEventListener","useImgSize","fn","imgWidth","setImgWidth","imgHeight","setImgHeight","ele","useDragInfo","querySelector","isCanDrag","useMemo","useMove","preImgScale","usePrevious","prev","next","dragStatus","setDragStatus","lastReacordPos","setLastRecordPos","x","y","startPos","setStartPos","offsetPos","setOffsetPos","onStartMove","e","preventDefault","clientX","clientY","onMoving","persist","newPosX","newPosY","pos","onEndMove","Viewer","className","styles","imgWrapper","onMouseUp","onMouseLeave","container","id","draggable","style","transform","transition","cursor","src","alt","onMouseDown","onMouseMove","memo","Tooltip","content","tooltip","tooltipContent","useKeyboardClose","usingStatus","onClose","listenEnterToClose","code","useIntoViewerShown","controllerShown","setControllerShown","timeout","setTimeout","clearTimeout","useScale","zoomin","zoomout","zoomreset","useToggle","isCanGoNext","isCanGoLast","goNext","goLast","useRotate","Controller","keyboard","top","close","onClick","bottom","shown","controller","Fragment","controllerItem","disabled","separator","ScaleTip","setShown","opacity","visibility","Browser","Portal","wrapperLayer","ImgViewer","firstImg","PictureViewer","picture","zIndex","Array","isArray"],"mappings":"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"}